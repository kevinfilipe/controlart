<ui:composition template="template/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">
	<ui:define name="titulo">
	#{msgs.tituloSistema} - #{msgs.labelPecasTransacao}
	</ui:define>

	<ui:define name="conteudo">
		<h:form id="formPesquisa">
			<p:growl globalOnly="true" life="10000" />

			<p:panel styleClass="panel">
				<f:facet name="header">
					<h:graphicImage styleClass="header-image"
						value="#{resource['image:favicon.ico']}" />
					<h:outputLabel value="Pesquisar" />
				</f:facet>

				<h:outputLabel value="#{msgs.labelTipoTransacao}" />
				<p:selectOneMenu id="tipoTransacao" required="true"
					converter="entityConverter"
					value="#{relatoriosBean.tipoTransacaoT}">
					<f:selectItem itemLabel="#{msgs.labelSelecione}"
						noSelectionOption="true" />
					<f:selectItems var="tipoTransacao" itemValue="#{tipoTransacao}"
						itemLabel="#{tipoTransacao.nome}"
						value="#{relatoriosBean.listTipoTransacaoEntrada}" />
				</p:selectOneMenu>
				<p:message for="tipoTransacao" />
				
				<h:outputLabel value="Periodo" />
				De: <p:calendar					
					id="dataInicial" locale="#{localeBean.locale}"
					pattern="dd/MM/yyyy" readonlyInput="true"
					showOn="both" value="#{relatoriosBean.dataInicial}" />
				Ate: <p:calendar					
					id="dataFinal" locale="#{localeBean.locale}"
					pattern="dd/MM/yyyy" readonlyInput="true"
					showOn="both" value="#{relatoriosBean.dataFinal}" />

				<p:commandButton
					action="#{relatoriosBean.gerarRelatorioPecasTransacao}"
					styleClass="botao" title="Gerar Report" value="Gerar Report"
					ajax="false" onclick="notEmpty(this)" />

				<script type="text/javascript">
					function notEmpty(obj) {
						var myTextField = document
								.getElementById('formPesquisa:tipoTransacao');
						if (myTextField.innerText.trim() != "Selecione...")
							obj.form.target = '_blank';
					}
				</script>
			</p:panel>
		</h:form>
	</ui:define>
</ui:composition>